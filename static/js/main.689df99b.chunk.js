(window.webpackJsonpair=window.webpackJsonpair||[]).push([[0],[,,,,,,,,,,,function(e,t,o){e.exports=o(21)},,,,,,function(e,t){function o(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}o.keys=function(){return[]},o.resolve=o,e.exports=o,o.id=17},function(e,t,o){e.exports={app:"App_app__1kX79",remoteVideoContainer:"App_remoteVideoContainer__3Ivad",localVideoContainer:"App_localVideoContainer__Ed5r_",video:"App_video__33LfF",remoteVideo:"App_remoteVideo__75MRL App_video__33LfF",form:"App_form__30Y9M",formGroup:"App_formGroup__3WCP6",formLabel:"App_formLabel__1M7Lt",formItem:"App_formItem__CNroQ",formId:"App_formId__1e-xR",formButton:"App_formButton__1Gtm6",icon:"App_icon__NYH35",localVideo:"App_localVideo__2nimy App_video__33LfF"}},function(e,t,o){},function(e,t,o){},function(e,t,o){"use strict";o.r(t);var a=o(0),r=o(3),n=o(1),i=o.n(n),c=o(4),l=o(5),m=o(6),s=o(9),p=o(7),d=o(10),_=o(8),u=o.n(_),f=o(18),v=function(e){function t(e){var o;return Object(l.a)(this,t),(o=Object(s.a)(this,Object(p.a)(t).call(this,e)))._localVideo=void 0,o._remoteVideo=void 0,o._remoteId=void 0,o._localStream=void 0,o._remoteStream=void 0,o._peer=void 0,o.call=function(e){e.preventDefault();var t=o._remoteId.current,a=o._peer.call(t.value,o._localStream);o.captureCallStream(a)},o.copyLocalIdToClipboard=function(){var e=document.createElement("input"),t=document.getElementById("root");t.appendChild(e),e.value=o._peer.id,e.select(),document.execCommand("copy"),t.removeChild(e)},o.state={localId:"",isRemoteVisible:!1},o._localVideo=a.createRef(),o._remoteVideo=a.createRef(),o._remoteId=a.createRef(),o._peer=new u.a({key:"peerjs"}),o}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,o=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._localVideo.current,e.next=3,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 3:this._localStream=e.sent,t.srcObject=this._localStream,this._peer.on("open",(function(){o.setState({localId:o._peer.id})})),this._peer.on("call",(function(e){window.confirm("".concat(e.peer," is calling. Answer call?"))&&o.answer(e)})),this._peer.on("error",(function(e){console.error(e)}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this._remoteStream&&(this._remoteVideo.current.srcObject=this._remoteStream)}},{key:"answer",value:function(e){e.answer(this._localStream),this.captureCallStream(e)}},{key:"captureCallStream",value:function(e){var t=this;e.on("stream",(function(e){t._remoteStream=e,t.setState({isRemoteVisible:!0})}))}},{key:"render",value:function(){var e=this.state.isRemoteVisible?a.createElement("video",{className:f.remoteVideo,autoPlay:!0,ref:this._remoteVideo}):a.createElement("form",{className:f.form,onSubmit:this.call},a.createElement("div",{className:f.formGroup},a.createElement("label",{className:f.formLabel},"Call someone's ID:"),a.createElement("div",{className:f.formItem},a.createElement("input",{className:f.formId,type:"text",ref:this._remoteId}),a.createElement("button",{className:f.formButton,type:"submit",title:"Start call"},a.createElement("i",{className:"material-icons ".concat(f.icon)},"videocam")))),a.createElement("div",{className:f.formGroup},a.createElement("label",{className:f.formLabel},"Copy your ID:"),a.createElement("div",{className:f.formItem},a.createElement("span",{className:f.formId},this.state.localId),a.createElement("button",{className:f.formButton,type:"button",title:"Copy to clipboard",onClick:this.copyLocalIdToClipboard},a.createElement("i",{className:"material-icons ".concat(f.icon)},"file_copy")))));return a.createElement("div",{className:f.app},a.createElement("div",{className:f.remoteVideoContainer},e),a.createElement("div",{className:f.localVideoContainer},a.createElement("video",{className:f.localVideo,autoPlay:!0,ref:this._localVideo})))}}]),t}(a.Component);o(19),o(20);r.render(a.createElement(v,null),document.getElementById("root"))}],[[11,1,2]]]);
//# sourceMappingURL=main.689df99b.chunk.js.map